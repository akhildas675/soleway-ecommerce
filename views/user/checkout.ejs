<!DOCTYPE html>
<html lang="zxx">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Checkout Page</title>

    <!-- ::::::::::::::Favicon icon::::::::::::::-->
    <link rel="shortcut icon" href="/user-assets/images/icons/FAVICON SW.png" type="image/png" />

    <!-- Bootstrap Icons CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.3/font/bootstrap-icons.min.css"
        rel="stylesheet" />

    <%- include('./partials/solewayCss.ejs') %>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <link rel="stylesheet" href="/userMng-assets/css/vendor/vendor.min.css" />
        <link rel="stylesheet" href="/userMng-assets/css/plugins/plugins.min.css" />
        <link rel="stylesheet" href="/userMng-assets/css/style.min.css" />
        <link rel="stylesheet" href="/userMng-assets/css/checkout.css" />

        <!-- Tostify link -->

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />

        
</head>

<body>
    <!-- Start Header Area -->
    <header class="header-section d-none d-xl-block">
        <div class="header-wrapper">
            <div
                class="header-bottom header-bottom-color--black section-fluid sticky-header sticky-color--Black blackbg">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 d-flex align-items-center justify-content-between color--Black blackbg">
                            <!-- Start Header Logo -->
                            <div class="header-logo">
                                <div class="logo">
                                    <a href="/"><img src="/userMng-assets/images/logo/1.png" alt="" /></a>
                                </div>
                            </div>
                            <!-- End Header Logo -->

                            <!-- Start Header Main Menu -->
                            <div class="main-menu menu-color--black menu-hover-color--Black">
                                <nav>
                                    <ul>
                                        <li class="has-dropdown">
                                            <a class="active main-menu-link" href="/">Home <i class="fa"></i></a>
                                            <!-- Sub Menu -->
                                        </li>
                                        <li class="has-dropdown has-megaitem">
                                            <a href="/Shop">Shop <i class="fa"></i></a>
                                            <!-- Mega Menu -->
                                        </li>
                                        
                                        <li class="has-dropdown">
                                            <a href="/Blog">Blog<i class="fa"></i></a>
                                            <!-- Sub Menu -->
                                        </li>
                                        <li>
                                            <a href="/About">About Us</a>
                                        </li>
                                        <li>
                                            <a href="/Contact">Contact Us</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                            <!-- End Header Main Menu Start -->

                            <!-- Start Header Action Link -->
                            <ul class="header-action-link action-color--white action-hover-color--white">
                                <li>

                                </li>
                                <li>

                                </li>
                                <li>

                                </li>
                                <li>
                                    <a href="#offcanvas-about" class="offacnvas offside-about offcanvas-toggle">
                                        <i class="icon-menu"></i>
                                    </a>
                                </li>
                            </ul>
                            <!-- End Header Action Link -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Start Header Area -->

    <!-- Start Mobile Header -->
    <div class="mobile-header mobile-header-bg-color--black section-fluid d-lg-block d-xl-none">
        <div class="container">
            <div class="row">
                <div class="col-12 d-flex align-items-center justify-content-between">
                    <!-- Start Mobile Left Side -->
                    <div class="mobile-header-left">
                        <ul class="mobile-menu-logo">
                            <li>
                                <a href="/">
                                    <div class="logo">
                                        <img src="/userMng-assets/images/logo/1.png" alt="" />
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Mobile Left Side -->

                    <!-- Start Mobile Right Side -->
                    <div class="mobile-right-side">
                        <ul class="header-action-link action-color--black action-hover-color--white">
                            <li></li>
                            <li></li>
                            <li></li>
                            <li>
                                <a href="#mobile-menu-offcanvas" class="offcanvas-toggle offside-menu">
                                    <i class="icon-menu"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Mobile Right Side -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Mobile Header -->

    <!--  Start Offcanvas Mobile Menu Section -->
    <div id="mobile-menu-offcanvas" class="offcanvas offcanvas-rightside offcanvas-mobile-menu-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close">
                <i class="ion-android-close"></i>
            </button>
        </div>
        <!-- End Offcanvas Header -->
        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <div class="offcanvas-mobile-menu-wrapper">
            <!-- Start Mobile Menu  -->
            <div class="mobile-menu-bottom">
                <!-- Start Mobile Menu Nav -->
                <div class="offcanvas-menu">
                    <ul>
                        <li>
                            <a href="/"><span>Home</span></a>
                        </li>
                        <li>
                            <a href="/Shop"><span>Shop</span></a>
                        </li>
                        <li>
                            <a href="/Blog"><span>Blogs</span></a>
                        </li>
            
                        <li><a href="/About">About Us</a></li>
                        <li><a href="/Contact">Contact Us</a></li>
                    </ul>
                </div>
                <!-- End Mobile Menu Nav -->
            </div>
            <!-- End Mobile Menu -->

            <!-- Start Mobile contact Info -->
            <div class="mobile-contact-info">
                <div class="logo">
                    <a href="index.html"><img src="/userMng-assets/images/logo/1.png" alt="" /></a>
                </div>

                <!-- <ul class="social-link">
                    <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                    <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                    <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                </ul> -->

                <ul class="user-link">
                    <li><a href="/Wishlist">Wishlist</a></li>
                    <li><a href="/Cart">Cart</a></li>
                    <li><a href="/Account">Account</a></li>
                </ul>
            </div>
            <!-- End Mobile contact Info -->
        </div>
        <!-- End Offcanvas Mobile Menu Wrapper -->
    </div>
    <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Mobile Menu Section -->
    <div id="offcanvas-about" class="offcanvas offcanvas-rightside offcanvas-mobile-about-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close">
                <i class="ion-android-close"></i>
            </button>
        </div>
        <!-- End Offcanvas Header -->
        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <!-- Start Mobile contact Info -->
        <div class="mobile-contact-info">
            <div class="logo">
                <a href="index.html"><img src="/userMng-assets/images/logo/1.png" alt="" /></a>
            </div>

            <address class="address">
                <span>Name of the maker: Akhildas H.</span>
                <span>Call Us: 6238381782</span>
                <span>Email: akhildas675@gmail.com</span>
            </address>

            <ul class="social-link">
                <li>
                    <a href="#"><i class="fa fa-facebook"></i></a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-instagram"></i></a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-linkedin"></i></a>
                </li>
            </ul>

            <ul class="user-link">
                <li><a href="/Wishlist">Wishlist</a></li>
                <li><a href="/Cart">Cart</a></li>
                <li><a href="/Account">Account</a></li>
            </ul>
        </div>
        <!-- End Mobile contact Info -->
    </div>
    <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Addcart Section -->
    <div id="offcanvas-add-cart" class="offcanvas offcanvas-rightside offcanvas-add-cart-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close">
                <i class="ion-android-close"></i>
            </button>
        </div>
        <!-- End Offcanvas Header -->

        <!-- Start  Offcanvas Addcart Wrapper -->
        <!-- End  Offcanvas Addcart Wrapper -->
    </div>
    <!-- End  Offcanvas Addcart Section -->

    <!-- Start Offcanvas Mobile Menu Section -->

    <!-- End Offcanvas Mobile Menu Section -->

    <!-- Start Offcanvas Search Bar Section -->
    <div id="search" class="search-modal">
        <button type="button" class="close">×</button>
        <form>
            <input type="search" placeholder="type keyword(s) here" />
            <button type="submit" class="btn btn-lg btn-white">Search</button>
        </form>
    </div>
    <!-- End Offcanvas Search Bar Section -->

    <!-- Offcanvas Overlay -->
    <div class="offcanvas-overlay"></div>

    <!-- ...:::: Start Breadcrumb Section:::... -->
    <div class="breadcrumb-section breadcrumb-bg-color--white">
        <div class="breadcrumb-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h3 class="breadcrumb-title">Checkout</h3>
                        <div class="breadcrumb-nav breadcrumb-nav-color--black breadcrumb-nav-hover-color--white">
                            <nav aria-label="breadcrumb">
                                <ul>
                                    <li><a href="/">Home</a></li>
                                    <li><a href="/productShop">Shop</a></li>
                                    <li class="active" aria-current="page">Checkout</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ...:::: End Breadcrumb Section:::... -->

    <!-- ...:::: Start Checkout Section:::... -->
    <% if (locals.findAddress && locals.findCartItems.cartProducts.length> 0 &&locals.coupon && locals.wallet) { %>
        <div class="checkout-section">
            <div class="container">
                <div class="row">
                    <!-- User Quick Action Form -->
                    <div class="col-12">
                        <!-- ... (other content) ... -->
                    </div>
                </div>

                <!-- Start User Details Checkout Form -->
                <div class="row">
                    <!-- Left Column: Shipping and Payment Details -->
                    <div class="col-lg-7 col-md-12 order-2 order-lg-1" data-aos="fade-up" data-aos-delay="400">
                        <div class="checkout_form">
                            <div class="row">
                                <!-- Address Selection -->
                                <div class="col-12">
                                    <div class="default-form-box">
                                        <label>Select Shipping Address <span></span></label>

                                        <% if (findAddress.length> 0) { %> <% for (let i=0; i < findAddress.length; i++){ %>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="address"
                                                        id="address<%= i %>" value="<%=findAddress[i]._id %>" <%=i===0
                                                        ? 'checked' : '' %>>
                                                    <label class="form-check-label address-box" for="address<%= i %>">
                                                        <div>
                                                            <strong>
                                                                <%= findAddress[i].name %>
                                                            </strong><br />
                                                            Mobile: <%= findAddress[i].mobile %><br />
                                                                Home Address: <%= findAddress[i].homeAddress %><br />
                                                                    City: <%= findAddress[i].city %><br />
                                                                        District: <%= findAddress[i].district %><br />
                                                                            State: <%= findAddress[i].state %><br />
                                                                                Pincode: <%= findAddress[i].pincode %>
                                                                                    <br />
                                                        </div>
                                                    </label>
                                                </div>
                                                <% } %>
                                                    <% } else { %>
                                                        <p>No addresses found. Please add an address.</p>
                                                        <% } %>

                                                            <!-- Add Address Button -->
                                                            <button class="btn btn-secondary mt-3" type="button"
                                                                onclick="toggleAddAddressForm()">
                                                                Add Address
                                                            </button>

                                                            <!-- Add Address Form (Initially Hidden) -->
                                                            <div id="add-address-form"
                                                                style="display: none; margin-top: 20px">
                                                                <form id="addressForm" onsubmit="addAddress(event)">
                                                                    <div class="form-group">
                                                                        <label for="name">Name</label>
                                                                        <input type="text" id="name"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="mobile">Mobile</label>
                                                                        <input type="number" id="mobile"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="homeAddress">Home Address</label>
                                                                        <input type="text" id="homeAddress"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="city">City</label>
                                                                        <input type="text" id="city"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="district">District</label>
                                                                        <input type="text" id="district"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="state">State</label>
                                                                        <input type="text" id="state"
                                                                            class="form-control" required />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="pincode">Pincode</label>
                                                                        <input type="number" id="pincode"
                                                                            class="form-control" required />
                                                                    </div>

                                                                    <button type="submit" class="btn btn-primary mt-3">
                                                                        Save Address
                                                                    </button>
                                                                </form>
                                                            </div>
                                    </div>
                                </div>

                                <!-- Payment Method Selection -->
                                <div class="col-12 mt-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment_method" id="cod"
                                            value="COD" onclick="hideWalletBalance()" />
                                        <label class="form-check-label" for="cod">Cash on Delivery</label>
                                    </div>
                                </div>

                                <div class="col-12 mt-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment_method" id="online"
                                            value="Online" onclick="hideWalletBalance()" />
                                        <label class="form-check-label" for="online">Online Payment</label>
                                    </div>
                                </div>

                                <div class="col-12 mt-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment_method" id="wallet"
                                            value="Wallet" onclick="showWalletBalance()" />
                                        <label class="form-check-label" for="wallet">Wallet</label>
                                    </div>
                                </div>

                                <% if (wallet && wallet.balance !==undefined) { %>
                                    <!-- Wallet Balance Display -->
                                    <div class="col-12 mt-3" id="wallet-balance-container" style="display: none">
                                        <div class="default-form-box">
                                            <label for="wallet-balance">Wallet Balance:</label>
                                            <p>
                                                Your current balance is:
                                                <strong>
                                                    <%= wallet.balance.toFixed(2) %>
                                                </strong>
                                            </p>
                                        </div>
                                    </div>
                                    <% } else { %>
                                        <!-- Fallback if wallet balance is not found -->
                                        <div class="col-12 mt-3" id="wallet-balance-container" style="display: none">
                                            <div class="default-form-box">
                                                <label for="wallet-balance">Wallet Balance:</label>
                                                <p><strong>No wallet balance found</strong></p>
                                            </div>
                                        </div>
                                        <% } %>


                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Product Details Table -->
                    <div class="col-lg-5 col-md-12 order-1 order-lg-2" data-aos="fade-left" data-aos-delay="600">
                        <div class="order-container">
                            <h4 class="order-title">Your Order</h4>
                            <table id="orderTable">
                                <tr>
                                    <th>Product</th>
                                    <th>Details</th>
                                </tr>

                                <% let grandTotal=0 %>
                                    <!-- Initialize grand total -->
                                    <% for (let i=0; i < findCartItems.cartProducts.length; i++) { %>
                                        <% let product=findCartItems.cartProducts[i]; %>
                                            <% let price=product.productId.offerPrice || product.productId.realPrice; %>
                                                <% let productTotal=product.quantity * price; %>
                                                    <% grandTotal +=productTotal; %>
                                                        <!-- Add to grand total -->

                                                        <tr class="product-row">
                                                            <td>
                                                                <div style="
                        display: flex;
                        justify-content: center;
                        align-items: center;
                      ">
                                                                    <img src="../<%= product.productId.images[0] %>"
                                                                        alt="Product Image" />
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <strong style="font-size: 18px">
                                                                    <%= product.productId.productName %>
                                                                </strong><br />
                                                                <span style="font-size: 16px">Size: <%= product.size %>
                                                                </span><br />
                                                                <span style="font-size: 16px">Price: ₹<%= price %>
                                                                </span><br />

                                                    <% if (product.productId.offerId &&product.productId.offerId.offerPercentage) { %>
                                                 <span class="offer-available">Offer: <%= product.productId.offerId.offerPercentage %>
                                                                            %
                                                                            Off</span><br />
                                                                    <% } else { %>
                                                                        <span class="no-offer">No Offer
                                                                            Available</span><br />
                                                                        <% } %>

                                                                            <span style="font-size: 16px">Quantity: <%=
                                                                                    product.quantity %></span><br />
                                                                <span style="font-size: 16px">Total: ₹<%=productTotal.toFixed(2) %></span>
                                                            </td>
                                                        </tr>
                                                        <% } %>

                                                            <!-- Available Coupons -->
                                                            <% if (coupon.length> 0) { %>
                                                                <tr>
                                                                    <td colspan="2">
                                                                        <div id="availableCoupons">
                                                                            <p>Select any one coupon:</p>
                                                                            <ul>
                                                                                <% for (let i=0; i < coupon.length; i++){ %>
                                                                                    <li class="coupon-card">
                                                                                        <div>
                                                                                            <span
                                                                                                class="coupon-name"><strong>
                                                                                                    <%= coupon[i].couponN %>
                                                                                                </strong></span>
                                                                                            <span class="coupon-code">
                                                                                                <%= coupon[i].couponCode %>
                                                                                            </span>
                                                                                        </div>
                                                                                        <button id="coupon-btn-<%= i %>"
                                                                                            class="coupon-button"
                                                                                            data-coupon-code="<%= coupon[i].couponCode %>"
                                                                                            onclick="applyOrRemoveCoupon('<%= coupon[i].couponCode %>', '<%= i %>')">
                                                                                            Apply
                                                                                        </button>
                                                                                    </li>
                                                                                    <% } %>
                                                                            </ul>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <% } else { %>
                                                                    <tr>
                                                                        <td colspan="2">
                                                                            <p>No coupons available.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <% } %>

                                                                        <!-- Grand Total -->
                                                                        <tr class="grand-total-row">
                                                                            <td colspan="2">
                                                                                Grand Total: ₹<strong id="grandTotal">
                                                                                    <%= grandTotal.toFixed(2) %>
                                                                                </strong>
                                                                            </td>
                                                                        </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Place Order Button -->
                <div class="col-12 mt-3">
                    <div class="form-group">
                        <button class="btn btn-primary btn-block" type="button" onclick="placeOrder(event)">
                            Place Order
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <% } else { %>
            <!-- Message for no product in checkout -->
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <i class="bi bi-cart" style="font-size: 48px; color: #666"></i>
                        <h2 class="mt-3">Your cart is empty.</h2>
                        <p>Please add some products to proceed to checkout.</p>

                        <a href="/Shop" class="btn btn-primary mt-3">
                            <i class="bi bi-shop"></i> Shop Now
                        </a>
                    </div>
                </div>
            </div>
            <% } %>
            <!-- Hidden input to store adjustments data -->
<input type="hidden" id="adjustmentsData" value='<%= JSON.stringify(adjustments) %>' />


                <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

                <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
                <!-- Include SweetAlert2 -->
                <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

              

                <br />
                <br />

                <!-- Start Footer Section -->
                <%- include('./partials/userFooter.ejs') %>

                    <!-- End Footer Top -->

                    <!-- material-scrolltop button -->
                    <button class="material-scrolltop" type="button"></button>

                    <!-- Start Modal Add cart -->

                    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
                    <script src="/userMng-assets/js/vendor/vendor.min.js"></script>
                    <script src="/userMng-assets/js/plugins/plugins.min.js"></script>

                    <!-- Main JS -->
                    <script src="/userMng-assets/js/main.js"></script>
                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                    <script src="/userMng-assets/js/checkout.js"></script>


                  
                    
</body>

</html>